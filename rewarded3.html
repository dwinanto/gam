<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        Rewarded slot test page
    </title>
    <script src="//www.googletagservices.com/tag/js/gpt.js"></script>
    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/8.6.1/firebase-app.js"></script>

    <!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->
    <script src="https://www.gstatic.com/firebasejs/8.6.1/firebase-analytics.js"></script>

    <script>
        var rewardedSlot, rewardedSlot2, rewardedSlot3
        googletag = window.googletag || { cmd: [] };
        googletag.cmd.push(() => {
            rewardedSlot2 = googletag.defineOutOfPageSlot('/1056029/dwi_test_video', googletag.enums.OutOfPageFormat.REWARDED).addService(googletag.pubads());
            rewardedSlot2
                .setTargeting('test_request', '1')
                .addService(googletag.pubads());

            googletag.pubads().enableAsyncRendering();
            googletag.enableServices();

            googletag.pubads().addEventListener('rewardedSlotReady',
                function (evt) {
                    //if (confirm('want to see a rewarded ad?')) {
                    evt.makeRewardedVisible();
                    //} else {
                    //    googletag.destroySlots([rewardedSlot]);
                    //}
                });

            googletag.pubads().addEventListener('rewardedSlotGranted',
                function (evt) {
                    current_value = parseInt(document.getElementById("reward_label").innerHTML);
                    reward = evt.payload;
                    console.log(JSON.stringify(reward));
                    console.log(JSON.stringify(reward.amount));
                    document.getElementById("reward_label").innerHTML = JSON.stringify(current_value + reward.amount);

                    // alert('granted! ' + JSON.stringify(evt.payload));
                });

            googletag.pubads().addEventListener('rewardedSlotClosed',
                function (evt) {
                    // alert('Closed by the user!');
                    console.log('ad slot is closed');
                    googletag.destroySlots([rewardedSlot]);
                });
        });

        function myFunction() {
            window.googletag.cmd.push(function () {
                rewardedSlot = googletag.defineOutOfPageSlot('/1056029/dwi_test_video', googletag.enums.OutOfPageFormat.REWARDED).addService(googletag.pubads());
                rewardedSlot
                    .setTargeting('test_request', '1')
                    .addService(googletag.pubads());
                window.googletag.display(rewardedSlot);
            });
        }

        function myFunction2() {
            googletag.cmd.push(function () {
                googletag.display(rewardedSlot2);
            });
        }

        function myFunction3() {
            googletag.cmd.push(function () {
                rewardedSlot3 = googletag.defineOutOfPageSlot('/6062/sanghan_rweb_ad_unit', googletag.enums.OutOfPageFormat.REWARDED).addService(googletag.pubads());
                rewardedSlot3
                    // .setTargeting('test_request', '1')
                    .addService(googletag.pubads());
                googletag.display(rewardedSlot3);
            });
        }
    </script>

    <script>
        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        var firebaseConfig = {
            apiKey: "AIzaSyB3K5WuoObzk5VfLuxvksqbVOspP-WrzEA",
            authDomain: "avengers-gold.firebaseapp.com",
            projectId: "avengers-gold",
            storageBucket: "avengers-gold.appspot.com",
            messagingSenderId: "751876414940",
            appId: "1:751876414940:web:9e48be6a618fd9ec7f8319",
            measurementId: "G-GMPTS2X81N"
        };
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        firebase.analytics();
    </script>
</head>

<body>
    <p>
        Bottom of the page...
        <button onclick="myFunction()">Get my reward</button>
        <button onclick="myFunction2()">Get my reward2</button>
        <button onclick="myFunction3()">Get my reward3</button>
        <button onclick="googletag.cmd.push(function() { googletag.pubads().refresh(); });">Show/Refresh rewarded
            Ad</button>
    </p>
    <p id="reward_label">0</p>

</body>

</html>
