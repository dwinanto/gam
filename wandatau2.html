<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <script async src="https://securepubads.g.doubleclick.net/tag/js/gpt.js"></script>


  <script>
    window.googletag = window.googletag || { cmd: [] };

    googletag.cmd.push(function () {
      // Declare slots initially present on the page
      googletag.defineSlot('/6355419/Travel', [728, 90], 'leaderboard')
        .setTargeting("test", "infinitescroll")
        .addService(googletag.pubads());

      // Enable SRA to honor competetive exclusions and roadblocks.
      googletag.pubads().enableSingleRequest();

      // Enable services
      googletag.enableServices();
    });


  </script>
</head>

<body>
  <h1>GPT Test Page - Infinite Content WandaT</h1>

  <!-- First ad -->
  <div id="leaderboard">
    <script>
      // Call display() to register the slot as ready and fetch an ad.
      googletag.cmd.push(function () {
        googletag.display('leaderboard');
      });
    </script>
  </div>

  <p>par 1</p>
  <p>par 2</p>
  <p class="baca">par 3</p>
  <p>par 4</p>

  <p id="msg"></p>

  <div id="div1">hello div 1</div>
  <div id="div2">hello div 2</div>
  <div id="div3">hello div 3</div>
  <div id="mgid">mgid</div>


  <ul>
    <li sort="1">1</li>
    <li sort="2">2</li>
    <li sort="3">3</li>
    <li sort="4">4</li>
    <li sort="5">5</li>
    <li sort="6">6</li>
    <li sort="7">7</li>
  </ul>

  <script>
    function insertAfter(referenceNode, newNode) {
      referenceNode.parentNode.insertBefore(newNode, referenceNode.nextSibling);
    }
    // Function to add content to page
    function injectAds(targetNode) {
      googletag.cmd.push(function () {
        var slot = googletag.defineSlot('/6355419/Travel', [728, 90])
          .setTargeting('test', 'infinitescroll')
          .addService(googletag.pubads());

        var div = document.createElement('div');
        div.id = slot.getSlotElementId(); // auto-generated by GPT
        insertAfter(tempNode, div);
        googletag.display(slot);
      });
    }

    targetlist = ["li[sort='2']"];
    targetlist = ads_location._value.split(" ");
    for (let i = 0; i < targetlist.length; i++) {
      console.log(targetlist[i]);
      temp_nodes = document.querySelectorAll(targetlist[i]);

      for (j = 0; j < temp_nodes.length; j++) {
        injectAds(temp_nodes[j]);
      }      
    }


  </script>
</body>

</html>

id=mgid
p class=baca
li sort="1"
